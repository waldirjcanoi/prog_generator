
```markdown

# Java Code Generator (AWK + Template)

This project is a flexible code generator for Java (or other languages) based on text templates and a robust AWK rendering script. It allows you to define your data model in a simple `.conf` file and generate code artifacts (domain objects, value objects, repositories, etc.) using customizable templates.

---

## How It Works

1. **Configuration File (`.conf`)**  
   Define your entity and its fields in an INI-like config file.  
   Example:
   ```
   [general]
   entity=Achievement
   module=acme
   package=com.cargo.announcement

   [field_1]
   name=id
   typeObj=Integer

   [field_2]
   name=orderId
   typeObj=Integer

   # ...more fields...
   ```

2. **Templates (`.tmpl`)**  
   Write templates using `${variable}` placeholders for global and per-field values.  
   Use block markers like `${body_vo_properties_init}` ... `${body_vo_properties_end}` to repeat sections for each field.

3. **AWK Renderer (`scripts/render.awk`)**  
   This script parses the config, processes the template, and replaces tokens with the appropriate values.  
   It supports:
   - Global variables (from `[general]`)
   - Per-field variables (from `[field_*]`)
   - Composite variables (like `${cargs}` for constructor arguments)
   - Block repetition for per-field code

4. **Shell Driver Script**  
   - `buid-output.sh`: Flexible script to generate output from any config/template pair.

---

## Usage

### Generate Output from Any Config/Template Pair

```sh
build-template-output.sh my-entity.conf my-template.tmpl
```
- Output: `generated/my-template.java`

- By default, config files are expected in the `config/` directory and templates in the `templates/` directory.
- The output file will be placed in the `generated/` directory.

---

## Template Syntax

- **Global variables:** `${entity}`, `${module}`, `${package}`, etc.
- **Per-field variables:** `${propName}`, `${propType}`, `${propNameCap}`, etc.
- **Composite variables:** `${cargs}`, `${cprops}`, `${cvalues}` (auto-generated by the renderer).
- **Block repetition:**  
  ```
  ${body_vo_properties_init}
    private ${propType} ${propName};
  ${body_vo_properties_end}
  ```
  The block between `_init` and `_end` is repeated for each field.

---

## Adding New Templates

1. Create a new `.tmpl` file in the `templates/` directory.
2. Use the variable/block syntax as above.
3. Call `./build-template-output.sh` with your config and template.

---

## Requirements

- Bash shell
- GNU awk
- Standard Unix utilities (grep, sed, etc.)

---

## Directory Structure

```
.
├── build-template-output.sh
├── scripts/
│   └── render.awk
├── templates/
│   └── ... (your .tmpl files)
├── config/
│   └── ... (your .conf files)
└── generated/
    └── ... (output files)
```

---

## Troubleshooting

- If output files are empty or missing values, check:
  - The config file uses `[general]` and `[field_*]` sections.
  - The template uses correct variable names matching the config.
  - The AWK script is up to date and executable.

---

## License

MIT License

---

*Happy code generation!*
```